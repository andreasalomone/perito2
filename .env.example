# ===========================================
# Report AI - Production Environment Template
# ===========================================
# Copy this file to .env and fill in the values

# --- Required Configuration ---

# Gemini API Key (Required for LLM functionality)
GEMINI_API_KEY=your_gemini_api_key_here

# Flask Secret Key (CRITICAL: Use a strong, random 32+ character string)
# Generate with: python -c "import secrets; print(secrets.token_hex(32))"
FLASK_SECRET_KEY=your_very_long_random_secret_key_here

# --- Database Configuration ---

# PostgreSQL connection URL (for production)
# Format: postgresql+psycopg://username:password@host:port/database
DATABASE_URL=postgresql+psycopg://reportai:reportai_password@db:5432/reportai

# Redis URL (for Celery broker and backend)
REDIS_URL=redis://redis:6379/0

# --- Authentication Configuration ---

# OPTION 1: Multi-User Authentication (Recommended for production)
# JSON format IMPORTANT: Use single quotes around the JSON to avoid parsing errors!
# Correct:   ALLOWED_USERS_JSON='{"user1": "pass1", "user2": "pass2"}'
# Incorrect: ALLOWED_USERS_JSON={"user1": "pass1"}  ‚ùå Will fail
# If set, this overrides BASIC_AUTH_USERNAME and BASIC_AUTH_PASSWORD
ALLOWED_USERS_JSON='{"admin": "change_this_password", "user1": "change_this_too", "user2": "another_password"}'

# OPTION 2: Single User Authentication (Backward compatibility)
# Only used if ALLOWED_USERS_JSON is not set
BASIC_AUTH_USERNAME=admin
BASIC_AUTH_PASSWORD=change_this_password

# --- Upload Configuration ---

# Upload folder path (use /app/uploads in Docker)
UPLOAD_FOLDER=/app/uploads

# Maximum file size in MB
MAX_FILE_SIZE_MB=25

# Maximum total upload size in MB
MAX_TOTAL_UPLOAD_SIZE_MB=100

# Maximum extracted text length
MAX_EXTRACTED_TEXT_LENGTH=1000000

# --- LLM Configuration ---

# Gemini model name
LLM_MODEL_NAME=gemini-2.5-pro

# LLM temperature (0.0-1.0)
LLM_TEMPERATURE=0.5

# Maximum tokens for LLM response
LLM_MAX_TOKENS=64000

# LLM API retry configuration
LLM_API_RETRY_ATTEMPTS=3
LLM_API_RETRY_WAIT_SECONDS=2
LLM_API_TIMEOUT_SECONDS=120

# --- Cache Configuration ---

# Prompt cache name (optional, set to reuse a specific cache)
REPORT_PROMPT_CACHE_NAME=

# Cache TTL in days
CACHE_TTL_DAYS=2

# Cache display name
CACHE_DISPLAY_NAME=ReportGenerationPromptsV2

# Cache state file path
CACHE_STATE_FILE=instance/cache_state.json

# --- Logging Configuration ---

# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# --- Document Generation Settings ---

# DOCX configuration
DOCX_FONT_NAME=Times New Roman
DOCX_FONT_SIZE_NORMAL=12
DOCX_FONT_SIZE_HEADING=12
DOCX_LINE_SPACING=1.5
DOCX_SPACE_AFTER_PARAGRAPH=0
